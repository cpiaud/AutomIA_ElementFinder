/*********************************************************************************/
/*    Ce script est soumis à la législation concernant les droits d'auteurs.     */
/*    Merci de ne pas réutiliser ce code sans l'accord préalable de ses auteurs  */
/*    respectifs.                                                                */
/*    © Infoclimat 2011     http://www.infoclimat.fr                             */
/*********************************************************************************/
_tryMP = 1;
function keepaliveIC()
{
    $.getJSON('https://www.infoclimat.fr/modeles/keepalive.php', {t:new Date().getTime(), tmp:_tryMP}, function(d){
	
	if(_tryMP === 1){
	    // check for mobile devices
	    /*if(d.iphone){
		$('body').append('<div class="mobile-app-download"><a href="">Application mobile iPhone</a></div>');
	    }else*/if(d.android){
		$('body').append('<div class="mobile-app-download"><a href="https://play.google.com/store/apps/details?id=fr.infoclimat">Application mobile Android</a></div>');
	    }else if(d.mobile){
		$('body').append('<div class="mobile-app-download"><a href="http://mobile.infoclimat.fr">Acc&eacute;der au site mobile</a></div>');
	    }
	}
	
	if(d.bstat == 1){
	    document.location = '/err/ban.html';
	}
	if(d.mpnl !=0){
	    $('#ICMENU-asso #icmailer-aff').html(d.mpnl).effect('pulsate', 1000, function(){});
	}
	_tryMP = 0;
	setTimeout(keepaliveIC, 1000*30*4);
    });
}
function vigiMF(vigi){if(vigi==1){window.open('http://france.meteofrance.com/vigilance/Accueil');return false;}else{$.get('/vigi/getVigiAjax.php',function(rep){open_box_ms(rep,'Vigilance M&eacute;t&eacute;o-France',undefined,undefined,'Voir la carte de vigilance','Fermer',function(){window.open('http://france.meteofrance.com/vigilance/Accueil');},function(){close_box_ms();});});return false;}}
//setInterval(keepaliveIC, 1000*30);
keepaliveIC();
$('#page').click(function(){menusw('close')});function verifMail(elm,verifUser){var elmid='#'+elm.attr('id');var span=elmid+'span';var regex=/^[a-z0-9._-]+@[a-z0-9._-]{2,}\.[a-z]{2,4}$/i;
var mail=$(elmid).val();if(verifUser==undefined){var verifUser=true}if(regex.test(mail)){$(span).css('color','black').html('Test de l\'adresse en cours...');var ajax=
ajax_file('/include/ajax/checkMail.php?mail='+mail+'&verifUser='+verifUser);if(ajax=='1'){$(span).css('color','green').html('Adresse valide.');return true}else if(ajax=='NOTAV'){
$(span).css('color','black').html('Vous devez attendre 30 secondes avant le prochain essai.');return false}else if(ajax=='CANT_VERIFY_USER'){$(span).css('color','red')
.html('Le nom de domaine est valide, mais l\'adresse ne peut pas &ecirc;tre valid&eacute;e automatiquement.')}else{$(span).css('color','red')
.html('Le format est correct, mais l\'adresse semble invalide.');return false}}else{$(span).css('color','red').html('Format d\'adresse non valide.');return false}}
function mstart(){var Width=$('.scroll-content').width();var boxWidth=$(this).width();if(boxWidth<Width){$('.scroll-content').stop().css('textIndent',boxWidth/2).animate({
textIndent:-boxWidth-150},35000,function(){start()})}else{$('.scroll-content').css('textIndent',boxWidth).animate({textIndent:-boxWidth-150},35000,function(){start()})}}
function mstop(){$('.scroll-content').stop()}$('.scroll-container').mouseover(function(){mstop();console.log('stop2')}).mouseout(mstart).ready(mstart);
function passComplexite(elm){var elmid='#'+elm.attr('id');var span='#'+elm.attr('id')+'span';if($(elmid).val().length<=4){$(span).css('color','red').html('Mot de passe trop court');
return false}else{$(span).html('');var pass=$(elmid).val();var i=0;var complexite=0;var bonus_l=0;var bonus_m=0;var bonus_c=0;var bonus_s=0;var nb_l=0;var nb_m=0;var nb_c=0;
var arrayLettres=new Array('a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z');var arrayLettresMAJ=
new Array('A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z');var arrayChiffres=new Array(1,2,3,4,5,6,7,8,9,0);var arraySpace=
new Array(' ','�');var arrayInterdits=new Array('mot de passe','password','motdepasse','azerty','azertyuiop','0123456789','123456789','12345');while(i<pass.length){if(arrayLettres.join()
.indexOf(pass[i])>=0){complexite=complexite+1;bonus_l=1;nb_l++}else if(arrayLettresMAJ.join().indexOf(pass[i])>=0){compexite=complexite+2;bonus_m=2;nb_m++}else if(arrayChiffres.join()
.indexOf(pass[i])>=0){complexite=complexite+3;bonus_c=3;nb_c++}else if(arraySpace.join().indexOf(pass[i])>=0){$(span).css('color','red').html('Caract&egrave;re non autoris&eacute; trouv&eacute;.');
return false}else{complexite=complexite+4;bonus_s=4}var coeff=complexite/pass.length;var total_bonus=bonus_l+bonus_m+bonus_c+bonus_s;var total=pass.length*(total_bonus*coeff);
var passLow=pass.toLowerCase();if(nb_l==pass.length){$(span).css('color','red').html('Le mot de passe ne contient que des lettres minuscules.');return false}else if(nb_m==pass.length){
$(span).css('color','red').html('Le mot de passe ne contient que des lettres majuscules.');return false}else if(nb_c==pass.length){$(span).css('color','red')
.html('Le mot de passe ne contient que des chiffres.');return false}else if(arrayInterdits.join().indexOf(passLow)>=0){$(span).css('color','red')
.html('Ce mot de passe ne peut pas &ecirc;tre utilis&eacute;.')}else{if(total<=20){$(span).css('color','red').html('M&eacute;diocre')}else if(total<=80){$(span)
.css('color','orange').html('Acceptable')}else{$(span).css('color','green').html('Tr&egrave;s bien')}}i++}}return true}function lecteurAudioFenSep(){var dew
=document.getElementById('dewplayer');var position=dew.dewgetpos();dew.dewpause();window.open('/include/dewplayer/audio_separe.html#'+position,'blt_audio_sep',
config='height=210, width=250, toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, directories=no, status=no');return false}function uploadFileContrib(ig){
if(ig==0){var box='<img src="/images/boutons/bouton_annuler.png" alt="Fermer" onclick="close_box_ms();" style="padding-top:4px;cursor:pointer;" /><hr>';
box+='<br /><a href="#" onclick="uploadFileContrib(1);return false;">[Upload par URL]</a><br /><a href="#" onclick="uploadFileContrib(2);return false;">[Upload depuis mon ordinateur]'
+'</a><br /><br /><br />';open_box_ms(box)}else if(ig==1){var box='<img src="/images/boutons/bouton_annuler.png" alt="Fermer" onclick="close_box_ms();" style="padding-top:4px;cursor:pointer;"'
+' /><hr>';box+='<br />Entrez l\'URL du fichier &agrave; ins&eacute;rer :<br /><input type="text" size="50" id="uploadFile2URL" /><input onclick="uploadFileContrib(3);" type="submit"'
+' value="Charger" /><br /><br />';open_box_ms(box)}else if(ig==2){}else if(ig==3){var url=$('#uploadFile2URL').val();if(url!=''){var token=chaineAleatoire(128);
setcookie('token_add_file_to_contribute',token);var id_contrib=$('#newContribTypeContrib').val();var ajax=ajax_file('/include/ajax/ajax_stock_contrib.php?id_contrib='+id_contrib+'&token='
+token+'&url='+encodeURIComponent(url));if(ajax=='EGET'){alert('Une erreur est survenue.')}else if(ajax=='NORIGHTS'){alert('Vous n\'avez pas les droits n\351cessaires pour effectuer cette action.')}
else{ajax=ajax.split('////v5ICv5////');var p=prompt('Voici l\'adresse de l\'image stock\351e :',ajax[1]);var up=$('#newContribUploadState').html();if(up=='aucun'){$('#newContribUploadState')
.html('1')}else{up++;$('#newContribUploadState').html(up)}var liste=$('#newContribUrlList').html();liste+='<br /><a href="'+ajax[1]+'">'+ajax[1]+'</a>';$('#newContribUrlList').html(liste);
close_box_ms()}}else{}}}function validerTypeContrib(){var type=$('#selectTypeOfContr').val();$('#newContribTypeContrib').val(type);$('#newContribTextarea').fadeIn();$('#newContribSelect')
.fadeOut();document.location.hash='type'+type}function rechercheMembreAddId(id,pseudo){$('#ecrireMpDestPseudo').val(pseudo);$('#ecrireMpDestId').val(id);$('#box_ms2').slideUp().html('');
$('#masque').css('zIndex','2000')}function oubliPass(p){if(p==0){var box='';box+='Veuillez indiquer dans le champ ci-dessous votre pseudo ou bien l\'adresse e-mail que vous avez'
+' utilis&eacute;e pour cr&eacute;er votre compte. Des instructions vous seront communiqu&eacute;es par e-mail.';box+='<br /><br /><label class="better-inputs-labels">Identifiant :</label><input class="better-inputs" type="text" placeholder="Pseudo ou email" '
+'size=50 id="oubliPassChamp" />';open_box_ms(box,'Oubli de mot de passe','','','R\351initialiser mon mot de passe','Annuler',function(){oubliPass(1)},function(){close_box_ms()})}
else if(p==1){var identif=$('#oubliPassChamp').val();if(identif.length>0){$('#oubliPassChamp').removeClass('ui-state-error');var ajax=ajax_file('/include/ajax/ajax_oubli_mot_de_passe.php?ident='
+encodeURIComponent(identif));if(ajax=='OK'){open_box_ms('<b>Confirmation</b><hr>Des instructions viennent de vous &ecirc;tre envoy&eacute;es par mail. N\'oubliez pas de v&eacute;rifier'
+' s\'il n\'a pas &eacute;t&eacute; bloqu&eacute; par votre antispam.','Oubli de mot de passe','','','Fermer','',function(){close_box_ms()});setTimeout(function(){close_box_ms()},5000)}
else if(ajax=='NO'){alert('Nous n\'avons pas pu r\351cup\351rer votre mot de passe. Vous pouvez r\351essayer.')}else{alert('Une erreur est survenue.')}}else{$('#oubliPassChamp')
.addClass('ui-state-error')}}}function seConnecter(y){if(y==0){var box='<form action="/include/connexion.php" method="post" onsubmit="seConnecter(1); return false;"><input class="better-inputs" placeholder="Votre pseudo"'
+' type="text" id="pseudoSeConnecter" /><input '
+' placeholder="Mot de passe" class="better-inputs" type="password" id="passSeConnecter" />';box+='<br /><input style="vertical-align:middle;" type="checkbox" checked="checked" '
+'id="rememberSeConnecter" /> Se souvenir de moi<br /><br /><input type="submit" style="display:none">';box+='<a href="/include/inscription.php">Pas encore membre ?</a><br /><a onclick="close_box_ms();oubliPass(0);" href="#">'
+'Mot de passe oubli&eacute; ?</a><br /><br />';open_box_ms(box,'Connexion &agrave; Infoclimat','','','Valider','Annuler',function(){close_box_ms();seConnecter(1)},function(){
$('#box_ms').dialog('close')});$('#passSeConnecter').type='text'}else if(y==1){var pseudo=$('#pseudoSeConnecter').val();var mdp=$('#passSeConnecter').val();var remember=
document.getElementById('rememberSeConnecter').checked;if((pseudo.length>0)&&(pseudo!='Votre pseudo')){$('#pseudoSeConnecter').css('backgroundColor','');if((mdp.length>0)&&(mdp!='Motdepasse')){
$('#passSeConnecter').css('backgroundColor','');var t=chaineAleatoire(128);setcookie('token_connexion_hid',t);$.post('/include/ajax/ajax_connexion.php',{pseudo:encodeURIComponent(pseudo),
pass:encodeURIComponent(mdp),rem:remember,token:t},function(ajax){if(ajax=='OK'){open_box_ms('<b>Confirmation</b><br />Vous &ecirc;tes d&eacute;sormais identifi&eacute;(e) sur Infoclimat'
+' et pouvez participer aux diff&eacute;rentes rubriques.<br />N\'oubliez pas de vous d&eacute;connecter lorsque vous quitterez cet ordinateur.','Identification r&eacute;ussie - Infoclimat');
setTimeout(function(){document.location.reload()},2300)}else if(ajax=='NOPSEUDO'){open_box_ms('<b>Erreur</b><br />Le compte que vous avez sp&eacute;cifi&eacute; &laquo '+pseudo
+' &raquo; est inexistant.','Connexion &agrave; Infoclimat','','','R�essayer','Annuler',function(){close_box_ms();seConnecter(0)},function(){close_box_ms()})}else{
open_box_ms('<b>Erreur</b><br />Votre mot de passe est erron&eacute;.','Connexion &agrave; Infoclimat','','','R�essayer','Mot de passe oubli� ?',function(){close_box_ms();seConnecter(0)},
function(){close_box_ms();oubliPass(0)})}})}else{$('#passSeConnecter').css('backgroundColor','red')}}else{$('#pseudoSeConnecter').css('backgroundColor','red')}}}function chaineAleatoire(nbcar){
var ListeCar=new Array("a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9");var Chaine='';
for(i=0;i<nbcar;i++){Chaine=Chaine+ListeCar[Math.floor(Math.random()*ListeCar.length)]}return Chaine}function seDeconnecter(ix){if(ix==0){
var box='&Ecirc;tes-vous s&ucirc;r(e) de vouloir vous d&eacute;connecter d\'Infoclimat ?';open_box_ms(box,'D&eacute;connexion','','','Oui','Non',function(){close_box_ms();seDeconnecter(1)},
function(){close_box_ms();seDeconnecter(2)})}else if(ix==1){var t=chaineAleatoire(128);setcookie('token_deconnexion_hid',t);var ajax=ajax_file('/include/ajax/ajax_deconnexion.php?t='+t);
if(ajax=='OK0'){open_box_ms('<b>Confirmation</b><br />Vous n\'&ecirc;tes d&eacute;sormais plus identifi&eacute;(e) sur Infoclimat.<br />Merci pour votre participation !','D&eacute;connexion');
setTimeout(function(){document.location.reload()},2000)}else{alert('Une erreur est survenue.')}}else{open_box_ms('<b>Action annul&eacute;e</b><br />Votre identification est toujours'
+' effective sur Infoclimat.','D&eacute;connexion');setTimeout(function(){close_box_ms()},2300)}}var box;function imageStock(url,act){if(act==0){
box='Vous pouvez remplir le champ ci-dessous si vous souhaitez commenter cette image. Si vous laissez le champ vide, un commentaire pourra &ecirc;tre ajout&eacute; ult&eacute;rieurement.<br />';
box+='<br /><input class="ui-widget-content ui-corner-all" type="text" id="commentaire_add_imageStock" size="65" />';box+=ajax_file('/include/ajax/user_i_stock.php?url='+encodeURIComponent(url));
open_box_ms(box,'Stocker une image - Infoclimat',500,500,'Stocker','Annuler',function(){imageStock(url,1)},function(){close_box_ms()})}else{var commentaire=
encodeURIComponent($('#commentaire_add_imageStock').val());var ajax=ajax_file('/include/ajax/ajax_mc_stockage_add_notok.php?comm='+commentaire+'&url='+encodeURIComponent(url));ajax=
ajax.split('//////////');if(ajax[0]=='OK'){open_box_ms('Votre image a &eacute;t&eacute; stock&eacute;e avec succ&egrave;s. Vous pouvez utiliser le lien ci-dessous pour l\'afficher ou la partager sur le forum :<br /><a href="'+ajax[1]+'">'+ajax[1]+'</a><br /><input type="text" value="'+ajax[1]+'" onfocus="this.select();" class="ui-widget-content ui-corner-all" size="65" /><br /><br />','Image stock&eacute;e ! - Infoclimat',500,500,'Voir l\'image dans une nouvelle fen�tre','Fermer',function(){window.open(ajax[1])},function(){close_box_ms()})}else{alert('Une erreur est survenue.')}}return true}function addCommentStock(fichier){var comm=prompt('Compl\351tez le champ ci-dessous pour ajouter un commentaire \340 cette image.');if(comm!=''){var token=$('#token_espace_stockage').val();var ajax=ajax_file('/include/ajax/ajax_add_comment_stock.php?fichier='+encodeURIComponent(fichier)+'&comm='+encodeURIComponent(comm)+'&token='+token);if(ajax=='OK'){open_box_ms('Le commentaire a &eacute;t&eacute; ajout&eacute; avec succ&egrave;s.','Espace de stockage','','','Ne pas attendre','',function(){close_box_ms()},'');afficheComStock(fichier,2)}else{alert('Une erreur est survenue.')}}else{alert('Aucun commentaire n\'a \351t\351 ajout\351.')}}function setcookie(nom,valeur){var aujourdhui=new Date();var expdate=new Date();expdate.setTime(aujourdhui.getTime()+(365*24*60*60*1000));document.cookie=nom+'='+valeur+';expires='+expdate.toGMTString()+';domain=.infoclimat.fr;path=/'}

function menusw(elm,z)
{
    if(elm=='close')
    {
	$('.menu_ouvert_js').slideUp();return
    }
    var state = elm.css('display');
    if(state=='block')
    {
	elm.stop(true,true).removeClass('menu_ouvert_js').slideUp();
    }else{
	if(elm.attr('id')=='menu_alerte_bas'){
	    elm.load('/include/ajax/getMenu.php', '', function(){
		var of=z.offset();
		$('.menu_ouvert_js').slideUp();
		elm.addClass('menu_ouvert_js').css({top:of.top+z.height(),left:of.left}).stop(true,true).slideDown();
	    });
	}
	
	/*var of=z.offset();
	$('.menu_ouvert_js').slideUp();
	elm.addClass('menu_ouvert_js').css({top:of.top+z.height(),left:of.left}).stop(true,true).slideDown();*/
    }
}
function aideMsgAlerte(){alert('Voici les raccourcis a connaitre :\n[lien="http://www.infoclimat.fr"]Votre texte[/lien] pour faire un lien hypertexte (mais dans tous les cas les liens sont ajout\351s automatiquement)\n[gras]Votre texte[/gras] pour mettre en gras\n[i]Votre texte[/i] pour l\italique\n[couleur="red"]Votre texte[/couleur] pour mettre en couleur (l\'hexad\351cimal fonctionne : #FF00FF)')}function open_box_ms(txt,titre,largeur,hauteur,btn1,btn2,action1,action2){if(titre==undefined){titre='Bo&icirc;te de dialogue - Infoclimat'}if(largeur==undefined||largeur==''){largeur=600}if(hauteur==undefined||hauteur==''){hauteur='auto'}if(btn1){var objet_bouton=new Object();if(btn2&&action2){objet_bouton[btn2]=action2}if(btn1&&action1){objet_bouton[btn1]=action1}$('#box_ms').html('<br />'+txt).dialog({zIndex:2001,close:function(){$('#masque').fadeOut();$('#box_ms').hide().dialog('destroy')},modal:true,show:'explode',hide:'blind',title:titre,width:largeur,height:hauteur,buttons:objet_bouton})}else{$('#box_ms').html('<br />'+txt).dialog({zIndex:2001,close:function(){$('#masque').fadeOut();$('#box_ms').hide().dialog('destroy')},modal:true,show:'explode',hide:'blind',title:titre,width:largeur})}}function close_box_ms(){$('#masque').fadeOut();$('#box_ms').dialog('destroy')}function open_dialog(url,titre){open_box_ms('<iframe src="'+url+'" border="0" style="width:100%;height:100%;"></iframe>',titre,600,400)}function close_dialog(){close_box_ms()}function page_switch_onglet(onglet){for(var i=0;i<page_onglet.length-1;i++){if(document.getElementById('page_titre_'+page_onglet[i])){if((page_onglet[i]==onglet)){if(onglet!='mask'){document.getElementById('page_item_texte_'+page_onglet[i]).className='item_texte';document.getElementById('page_item_texte_'+page_onglet[i]).style.display='block'}document.getElementById('page_titre_'+page_onglet[i]).className='titre';document.getElementById('page_titre_'+page_onglet[i]).style.display='block';document.getElementById('lien_action_'+page_onglet[i]).className='lien_action_en_cours'}else{document.getElementById('page_titre_'+page_onglet[i]).className='titre_hidden';document.getElementById('page_titre_'+page_onglet[i]).style.display='none';document.getElementById('page_item_texte_'+page_onglet[i]).className='item_texte_hidden';document.getElementById('page_item_texte_'+page_onglet[i]).style.display='none';document.getElementById('lien_action_'+page_onglet[i]).className='lien_action'}}}}function page_switch_reduce_display(item){if(document.getElementById('page_item_red_dis_'+item)){if(document.getElementById('page_item_red_dis_'+item).style.display=='none'){document.getElementById('page_item_red_dis_title_'+item).className='red_dis_display';document.getElementById('page_item_red_dis_'+item).style.display='block'}else{document.getElementById('page_item_red_dis_title_'+item).className='red_dis_reduce';document.getElementById('page_item_red_dis_'+item).style.display='none'}}}function page_get_item_position(a,offset){var of2=a.offsetHeight;var p=offset?offset.slice(0):[0,0],tn;while(a){tn=a.tagName.toUpperCase();p[0]+=a.offsetLeft-(tn=="DIV"&&a.scrollLeft?a.scrollLeft:0);p[1]+=a.offsetTop-(tn=="DIV"&&a.scrollTop?a.scrollTop:0);if(tn=="BODY")break;a=a.offsetParent}p[1]+=of2;return p}function ajax_file(fichier){if(window.XMLHttpRequest)xhr_object=new XMLHttpRequest();else if(window.ActiveXObject)xhr_object=new ActiveXObject("Microsoft.XMLHTTP");else{return(false);document.getElementById('bouton').disabled=''}xhr_object.open("GET",fichier,false);xhr_object.send(null);if(xhr_object.readyState==4)return(xhr_object.responseText);else return(false)}(function($){$.fn.toolTips=function(settings){options={offsetX:10,offsetY:-5,baseLine:'top',delay:200,click:true};var options=$.extend(options,settings);return this.each(function(){var $$=$(this);var aTitle=$$.attr('title')||'';var aHref=$$.attr('href')||'';var aRel=$$.attr('rel')||'';var aToolTip=$("<div></div>");var aCaption='';var aImage;var timer;var offsetX=1;var offsetY=1;$$.mouseover(function(e){$$.attr('title','');if(aTitle!=''){aCaption='<div class="toolTip-caption"><span>'+aTitle+'</span></div>'}if(aRel.match(/\.(png|jpg|jpeg|gif)$/)){aImage=$('<img src="'+aRel+'" />');aToolTip=$('<div class="toolTip-thumbnail">'+aCaption+'</div>')}else if(aHref.match(/\.(png|jpg|jpeg|gif)$/)){aImage=$('<img src="'+aHref+'" />');aToolTip=$('<div class="toolTip-picture">'+aCaption+'</div>')}else if(aTitle!=''){aToolTip=$("<div class='toolTip-text'><span>"+aTitle+"</span></div>")}aToolTip.appendTo("body").hide().css({position:'absolute',top:0,left:0});if((aImage)){aImage.load(function(){aImage.prependTo(aToolTip);offsetX=options.offsetX;if(options.baseLine=='bottom'){offsetY=options.offsetY-aToolTip.height()}else if(options.baseLine=='middle'){offsetY=options.offsetY-(aToolTip.height()/2)}aToolTip.css({left:parseInt(aToolTip.css('left'))+offsetX+"px",top:parseInt(aToolTip.css('top'))+offsetY+"px"})})}$$.mousemove(function(e){aToolTip.css({left:e.pageX+offsetX+"px",top:e.pageY+offsetY+"px"})});timer=setTimeout(function(){aToolTip.show()},options.delay)});$$.mouseout(function(e){clearTimeout(timer);$$.attr("title",aTitle);$$.unbind("mousemove");aToolTip.remove()});$$.click(function(){return options.click})})}})(jQuery);
(function(c){function a(d){if(d.attr("title")||typeof(d.attr("original-title"))!="string"){d.attr("original-title",d.attr("title")||"").removeAttr("title")}}function b(e,d){this.$element=c(e);
this.options=d;this.enabled=true;a(this.$element)}b.prototype={show:function(){var g=this.getTitle();if(g&&this.enabled){var f=this.tip();f.find(".tipsy-inner")[this.options.html?"html":"text"](g);
f[0].className="tipsy";f.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var j=c.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:
this.$element[0].offsetHeight});var d=f[0].offsetWidth,i=f[0].offsetHeight;var h=(typeof this.options.gravity=="function")?this.options.gravity.call(this.$element[0]):this.options.gravity;var e;
switch(h.charAt(0)){case"n":e={top:j.top+j.height+this.options.offset,left:j.left+j.width/2-d/2};break;case"s":e={top:j.top-i-this.options.offset,left:j.left+j.width/2-d/2};break;case"e":
e={top:j.top+j.height/2-i/2,left:j.left-d-this.options.offset};break;case"w":e={top:j.top+j.height/2-i/2,left:j.left+j.width+this.options.offset};break}if(h.length==2){if(h.charAt(1)=="w"){
e.left=j.left+j.width/2-15}else{e.left=j.left+j.width/2-d+15}}f.css(e).addClass("tipsy-"+h);if(this.options.fade){f.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:
this.options.opacity})}else{f.css({visibility:"visible",opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){c(this).remove()})}else{this.tip()
.remove()}},getTitle:function(){var f,d=this.$element,e=this.options;a(d);var f,e=this.options;if(typeof e.title=="string"){f=d.attr(e.title=="title"?"original-title":e.title)}else{
if(typeof e.title=="function"){f=e.title.call(d[0])}}f=(""+f).replace(/(^\s*|\s*$)/,"");return f||e.fallback},tip:function(){if(!this.$tip){this.$tip=c('<div class="tipsy"></div>')
.html('<div class="tipsy-arrow"></div><div class="tipsy-inner"/></div>')}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},
enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};c.fn.tipsy=function(h){if(h===true){return this.data("tipsy")}else
{if(typeof h=="string"){return this.data("tipsy")[h]()}}h=c.extend({},c.fn.tipsy.defaults,h);function g(k){var l=c.data(k,"tipsy");if(!l){l=new b(k,c.fn.tipsy.elementOptions(k,h));c.data(k,"tipsy",l)}
return l}function j(){var k=g(this);k.hoverState="in";if(h.delayIn==0){k.show()}else{setTimeout(function(){if(k.hoverState=="in"){k.show()}},h.delayIn)}}function f(){var k=g(this);k.hoverState="out";
if(h.delayOut==0){k.hide()}else{setTimeout(function(){if(k.hoverState=="out"){k.hide()}},h.delayOut)}}if(!h.live){this.each(function(){g(this)})}if(h.trigger!="manual"){var d=h.live?"live":"bind",
i=h.trigger=="hover"?"mouseenter":"focus",e=h.trigger=="hover"?"mouseleave":"blur";this[d](i,j)[d](e,f)}return this};c.fn.tipsy.defaults={delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:
false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover"};c.fn.tipsy.elementOptions=function(e,d){return c.metadata?c.extend({},d,c(e).metadata()):d};c.fn.tipsy.autoNS=function(){
return c(this).offset().top>(c(document).scrollTop()+c(window).height()/2)?"s":"n"};c.fn.tipsy.autoWE=function(){return c(this).offset().left>(c(document).scrollLeft()+c(window).width()/2)?"e":"w"}})
(jQuery);$(function(){$('.tipsy-trigger').tipsy({html:true,opacity:1});});

/* jquery dot dot dot */
!function(t,e){function n(t,e,n){var r=t.children(),o=!1;t.empty();for(var i=0,d=r.length;d>i;i++){var l=r.eq(i);if(t.append(l),n&&t.append(n),a(t,e)){l.remove(),o=!0;break}n&&n.detach()}return o}function r(e,n,i,d,l){var s=!1,c="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, blockquote, select, optgroup, option, textarea, script, style",u="script";return e.contents().detach().each(function(){var f=this,h=t(f);if("undefined"==typeof f||3==f.nodeType&&0==t.trim(f.data).length)return!0;if(h.is(u))e.append(h);else{if(s)return!0;e.append(h),l&&e[e.is(c)?"after":"append"](l),a(i,d)&&(s=3==f.nodeType?o(h,n,i,d,l):r(h,n,i,d,l),s||(h.detach(),s=!0)),s||l&&l.detach()}}),s}function o(e,n,r,o,d){var c=e[0];if(!c)return!1;var f=s(c),h=-1!==f.indexOf(" ")?" ":"　",p="letter"==o.wrap?"":h,g=f.split(p),v=-1,w=-1,b=0,y=g.length-1;for(o.fallbackToLetter&&0==b&&0==y&&(p="",g=f.split(p),y=g.length-1);y>=b&&(0!=b||0!=y);){var m=Math.floor((b+y)/2);if(m==w)break;w=m,l(c,g.slice(0,w+1).join(p)+o.ellipsis),a(r,o)?(y=w,o.fallbackToLetter&&0==b&&0==y&&(p="",g=g[0].split(p),v=-1,w=-1,b=0,y=g.length-1)):(v=w,b=w)}if(-1==v||1==g.length&&0==g[0].length){var x=e.parent();e.detach();var T=d&&d.closest(x).length?d.length:0;x.contents().length>T?c=u(x.contents().eq(-1-T),n):(c=u(x,n,!0),T||x.detach()),c&&(f=i(s(c),o),l(c,f),T&&d&&t(c).parent().append(d))}else f=i(g.slice(0,v+1).join(p),o),l(c,f);return!0}function a(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function l(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function s(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function c(t){do t=t.previousSibling;while(t&&1!==t.nodeType&&3!==t.nodeType);return t}function u(e,n,r){var o,a=e&&e[0];if(a){if(!r){if(3===a.nodeType)return a;if(t.trim(e.text()))return u(e.contents().last(),n)}for(o=c(a);!o;){if(e=e.parent(),e.is(n)||!e.length)return!1;o=c(e[0])}if(o)return u(t(o),n)}return!1}function f(e,n){return e?"string"==typeof e?(e=t(e,n),e.length?e:!1):e.jquery?e:!1:!1}function h(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],r=0,o=n.length;o>r;r++){var a=parseInt(t.css(n[r]),10);isNaN(a)&&(a=0),e-=a}return e}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(e){if(0==this.length)return t.fn.dotdotdot.debug('No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(e)});var o=this;o.data("dotdotdot")&&o.trigger("destroy.dot"),o.data("dotdotdot-style",o.attr("style")||""),o.css("word-wrap","break-word"),"nowrap"===o.css("white-space")&&o.css("white-space","normal"),o.bind_events=function(){return o.bind("update.dot",function(e,d){e.preventDefault(),e.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:h(o),l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||d instanceof HTMLElement)&&(d=t("<div />").append(d).contents()),d instanceof t&&(i=d)),g=o.wrapInner('<div class="dotdotdot" />').children(),g.contents().detach().end().append(i.clone(!0)).find("br").replaceWith("  <br />  ").end().css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var c=!1,u=!1;return s.afterElement&&(c=s.afterElement.clone(!0),c.show(),s.afterElement.detach()),a(g,l)&&(u="children"==l.wrap?n(g,l,c):r(g,o,g,l,c)),g.replaceWith(g.contents()),g=null,t.isFunction(l.callback)&&l.callback.call(o[0],u,i),s.isTruncated=u,u}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],s.isTruncated),s.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(o[0],i),i}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),o.unwatch().unbind_events().contents().detach().end().append(i).attr("style",o.data("dotdotdot-style")||"").data("dotdotdot",!1)}),o},o.unbind_events=function(){return o.unbind(".dot"),o},o.watch=function(){if(o.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),r=e.height();e.bind("resize.dot"+s.dotId,function(){n==e.width()&&r==e.height()&&l.windowResizeFix||(n=e.width(),r=e.height(),u&&clearInterval(u),u=setTimeout(function(){o.trigger("update.dot")},100))})}else c=d(o),u=setInterval(function(){if(o.is(":visible")){var t=d(o);(c.width!=t.width||c.height!=t.height)&&(o.trigger("update.dot"),c=t)}},500);return o},o.unwatch=function(){return t(window).unbind("resize.dot"+s.dotId),u&&clearInterval(u),o};var i=o.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,e),s={},c={},u=null,g=null;return l.lastCharacter.remove instanceof Array||(l.lastCharacter.remove=t.fn.dotdotdot.defaultArrays.lastCharacter.remove),l.lastCharacter.noEllipsis instanceof Array||(l.lastCharacter.noEllipsis=t.fn.dotdotdot.defaultArrays.lastCharacter.noEllipsis),s.afterElement=f(l.after,o),s.isTruncated=!1,s.dotId=p++,o.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&o.watch(),o},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",fallbackToLetter:!0,lastCharacter:{},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0},t.fn.dotdotdot.defaultArrays={lastCharacter:{remove:[" ","　",",",";",".","!","?"],noEllipsis:[]}},t.fn.dotdotdot.debug=function(){};var p=1,g=t.fn.html;t.fn.html=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?this.trigger("update",[n]):g.apply(this,arguments)};var v=t.fn.text;t.fn.text=function(n){return n!=e&&!t.isFunction(n)&&this.data("dotdotdot")?(n=t("<div />").text(n).html(),this.trigger("update",[n])):v.apply(this,arguments)}}}(jQuery);
